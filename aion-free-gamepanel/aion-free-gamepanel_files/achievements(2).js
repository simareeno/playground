define(["exports","module","packages/jquery","packages/bacon","packages/web-components","../abstract","../achievements"],function(exports,e,t,n,a,o,r){"use strict";function c(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n,a){e.getAllWithType("achievements").filter(function(){return"/achievements/"!==window.location.pathname}).filter(function(){return"RU"===document.documentElement.getAttribute("data-area").toUpperCase()}).flatMap(function(e){var t=e.data.achievementType;if(m["default"].components.isRegistered(t))return e;var n=d["default"].Deferred();return m["default"].components.on("registered",function a(o){o===t&&(m["default"].components.off("registered",a),n.resolve(e))}),u["default"].fromPromise(n.promise())}).onValue(function(e){t.push({id:e.id,name:e.data.achievementType,content:s,nodeName:"achievement-notificaton",extra:{achievement:e.data}})}),a.addEventListener("click",function(e){if(e.target.classList.contains("achievement_notificaton-close")){e.preventDefault();for(var t=e.target,o=void 0;t!==a.renderNode;){if("achievement-notificaton"===t.nodeName.toLowerCase()){o=t;break}t=t.parentNode}o&&n.push(o.id)}})}function s(e){var t=document.createElement("content"),n=document.createElement(e.name),a=e.extra||{},o=a.achievement;if(null!=e.extra.achievement){var c=document.createElement("div"),i=d["default"].extend(!0,{},o.context),s=(0,r.getABGroup)(i);s&&(i.ab.rewards=r.betaTestRules[s].rewards),l["default"].objectToModel(c,i),n.setAttribute("data-bind",!1),n.innerHTML='\n\t\t\t<content name="level">'+o.level+'</content>\n\t\t\t<content name="context">'+c.innerHTML+'</content>\n\t\t\t<content name="progress">'+o.progress+'</content>\n\t\t\t<content name="unlocked">'+o.isUnlocked+'</content>\n\t\t\t<content name="max-progress">'+o.maxProgress+"</content>\n\t\t"}return t.setAttribute("name","achievement"),t.appendChild(n),t}e.exports=i;var d=c(t),u=c(n),m=c(a),l=c(o)});
//# sourceMappingURL=achievements.js.map
