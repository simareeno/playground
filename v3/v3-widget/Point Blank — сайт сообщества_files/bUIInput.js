(function(){define(["packages/jquery","global/utils"],function(e,t){var n;return n=t.isMobile()&&"placeholder"in document.createElement("input"),{init:function(t){var n,a,r;if(a=this,r={},n=void 0,a._DOM={$oContainer:e(t),modifiers:{hasPlaceholder:"jsUIInput__mPlaceholder",isValidate:"jsUIInput__mValidate",isPassword:"jsUIInput__mPassword",isReplace:"jsUIInput__mReplace",placeholderVisible:"bUIInput__eInputBg__mPlaceholder_Visible",passwordVisible:"bUIInput__mPassword_Visible",eventsFocus:"bUIInput__mEvent_Focus",eventsError:"bUIInput__mEvent_Error",eventsDisabled:"bUIInput__mEvent_Disabled"},reference:{eControl:".jsUIInput__eControl",eControls:".jsUIInput__eControls",eInputBg:".jsUIInput__eInputBg",ePassword:".jsUIInput__ePassword",ePasswordText:".jsUIInput__ePasswordText",ePasswordEye:".jsUIInput__ePasswordEye"}},n=a._DOM,r.$oContainer=n.$oContainer,r.$oInput=n.$oContainer.find(n.reference.eControl),r.$oInput.data("firstInput",!0),r.$oInputs=n.$oContainer.find(n.reference.eControls),r.$oInputBg=n.$oContainer.find(n.reference.eInputBg),n.$oContainer.hasClass(n.modifiers.isPassword)&&(r.$oPassword=n.$oContainer.find(n.reference.ePassword),r.$oPasswordText=n.$oContainer.find(n.reference.ePasswordText),r.$oPasswordEye=n.$oContainer.find(n.reference.ePasswordEye)),n.$oContainer.data("nodes-bUIInput",r),r.$oInput.data("error-area"))return r.$oInput.data("error-area-node",e(r.$oInput.data("error-area")))},turnOn:function(){var t;return t=this._DOM.$oContainer.data("nodes-bUIInput"),this.setEventsListeners(this._DOM.$oContainer),t.$oInput.attr("disabled")?t.$oInput.trigger("customSetDisabled"):t.$oInput.attr("autofocus")&&t.$oInput.focus(),t.$oInputs.each(function(){return e(this).trigger("customValidate")})},turnOff:function(){var e;return e=this._DOM.$oContainer.data("nodes-bUIInput"),e.$oInput.off(".bUIInput"),e.$oInputs.off(".bUIInput")},setEventsListeners:function(t){var a,r,o;if(r=this,o=t.data("nodes-bUIInput"),a=r._DOM.modifiers,o.$oInputs.on("focus.bUIInput blur.bUIInput",function(e){return r.toggleOutline(o,"focus"===e.type)}),n?r.clearPlaceholder(o):t.hasClass(a.hasPlaceholder)&&(o.$oInputs.on("keydown.bUIInput keyup.bUIInput change.bUIInput input.bUIInput",function(t){var n;return n=e(this),"keydown"===t.type&&null!=this.selectionStart&&n.data("prevCaretPosition",this.selectionStart),r.checkPlaceholder(o,n)}),r.checkPlaceholder(o)),t.hasClass(a.isReplace)&&o.$oInputs.on("keyup.bUIInput change.bUIInput paste.bUIInput input.bUIInput",function(n){return n.keyCode>=35&&n.keyCode<=40||16===n.keyCode||r.replace(e(this),t)}),t.hasClass(a.isValidate)&&o.$oInputs.on("keyup.bUIInput change.bUIInput paste.bUIInput input.bUIInput customValidate.bUIInput",function(n){if(13!==n.keyCode)return r.validate(e(this),t,n)}),o.$oInput.on("customSetDisabled.bUIInput customRemoveDisabled.bUIInput",function(e){return t["customSetDisabled"===e.type?"addClass":"removeClass"](a.eventsDisabled)}),o.$oInputs.on("focusout.bUIInput",function(n){if(e(this).val().length&&(e(this).data("firstInput",!1),t.hasClass(a.isValidate)))return r.validate(e(this),t,n)}),t.hasClass(a.isPassword))return o.$oPasswordEye.bind("click",{$text:o.$oPasswordText,$pass:o.$oPassword},function(e){var n;if(!o.$oContainer.hasClass(a.eventsDisabled))return t.toggleClass(a.passwordVisible),n=e.data.$text.is(":disabled"),n?(e.data.$text.val(e.data.$pass.val()),e.data.$text[0].disabled=!1,e.data.$pass[0].disabled=!0):(e.data.$pass.val(e.data.$text.val()),e.data.$pass[0].disabled=!1,e.data.$text[0].disabled=!0)})},checkPlaceholder:function(e,t){return"undefined"==typeof t&&(t=e.$oInput),e.$oInputBg[t.val().length?"removeClass":"addClass"](this._DOM.modifiers.placeholderVisible)},clearPlaceholder:function(e){var t,n;return t=e.$oContainer.find(".bUIInput__ePlaceholderText"),n=t.text(),t.html("&nbsp;"),e.$oInputBg.removeClass("bUIInput__eInputBg__mPlaceholder_Visible"),e.$oInput.prop("placeholder",n)},toggleOutline:function(e,t){return e.$oContainer[t?"addClass":"removeClass"](this._DOM.modifiers.eventsFocus)},toggleError:function(e,t){return e[t?"addClass":"removeClass"](this._DOM.modifiers.eventsError)},replace:function(e,t){var n,a,r,o,s;if(o=e.data("pattern-replace-exclude"),o=new RegExp(o,"g"),s=e.val(),r=s.replace(o,function(e,t){return arguments.length>3&&null!=t?t:""}),s!==r&&(e.val(r),a=e.data("prevCaretPosition"),null!=a))return"function"==typeof(n=e[0]).setSelectionRange?n.setSelectionRange(a,a):void 0},validate:function(e,t,n){var a,r,o,s,i,u,d,l,p,I,c,f,h;if(d=!1,h=function(e){return e?"valid":"invalid"},c=function(e){return+e.replace(",",".")},p=function(t){var n;return n=c(t)>=e.attr("min"),u.min=h(n),n},l=function(t){var n;return n=c(t)<=e.attr("max"),u.max=h(n),n},o=function(e,t){return e.attr("min")&&e.attr("max")?d=p(t)&&l(t):e.attr("min")?d=p(t):e.attr("max")?d=l(t):void 0},f=e.val(),I=void 0,a=e.closest("form"),u={min:"valid"},i=void 0,e.data("error-area")&&(i=("function"==typeof(r=e[0]).onclick?r.onclick():void 0)||{},"string"==typeof e.data("error-area")&&e.data("error-area",a.find(e.data("error-area"))),e.data("error-area").html().trim()||e.data("error-area").addClass("bUIErrorMessage__mDisplay_None")),e.attr("pattern")&&e.attr("pattern").length?(I=new RegExp(e.attr("pattern"),"i"),d=I.test(f),"undefined"!=typeof e.data("can-be-empty")&&0===e.val().length&&(d=!0),d&&o(e,f)):e.attr("required")&&(d=f.length>0,o(e,f)),e.data("error-area")){for(s in u)i.hasOwnProperty(s)&&e.data("error-area").html(i[s]).toggleClass("bUIErrorMessage__mDisplay_None","invalid"!==u[s]);e.data("init-error")&&(e.data("error-area").html(e.data("init-error")).removeClass("bUIErrorMessage__mDisplay_None"),e.removeData("init-error"))}return e.data("valid",d),e[0].setCustomValidity&&e[0].setCustomValidity(""===f||d||e.data("firstInput")?"":e.data("error")),a.trigger("inputChanged")},restore:function(){return this.init()},remove:function(){var e;return e=this._DOM,e.$oContainer.find(e.reference.eControl).off(".bUIInput")}}})}).call(this);
//# sourceMappingURL=bUIInput.js.map
