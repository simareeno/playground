(function(){define(["packages/jquery"],function(t){return{init:function(e){var o;return o={},this.oForm=t(e),this.oForm.data("nodes",o)},turnOn:function(){var e;return e=this.oForm.data("nodes"),this.updateOValidateElements(),e.oValidateElementsInGroups={},this.oForm.find("input[required][data-group]").each(function(){var o;return o=t(this).data("group"),"undefined"==typeof e.oValidateElementsInGroups[o]&&(e.oValidateElementsInGroups[o]=[]),e.oValidateElementsInGroups[o].push(t(this))}),e.oSubmitButton=this.oForm.find(".bBigButton, .bUIButton"),this.oForm.on("inputChanged.bForm_simple",this._checkForm.bind(this)),this.oForm.data("validate-submit")&&this.oForm.on("submit.bForm_simple",function(o){return function(i){var a,r;return r=o.oForm.data("isValid"),r?o.oForm.trigger("progress"):(a=o.getValidationErrors(),e.oValidateElements.each(function(){var e,o,i,r;if(e=t(this),o=("function"==typeof this.onclick?this.onclick():void 0)||{},i=this.name in a&&o[a[this.name]])return null!=(r=e.data("error-area"))?r.html(i).removeClass("bUIErrorMessage__mDisplay_None"):void 0}),o.oForm.trigger("validationError")),r}}(this)),this._checkForm()},turnOff:function(){return this.oForm.off(".bForm_simple")},updateOValidateElements:function(){var t,e;if(this.oForm)return e=this.oForm.data("nodes"),t=this.oForm.find("input[required]:not([data-group])"),e.oValidateElements=t,this.oForm.data("validate-elements",e.oValidateElements)},getValidationErrors:function(){var t;return t={},this.oForm.find("input[required]:not([disabled]):not([data-group])").each(function(e,o){var i;if("checkbox"===o.type){if(!o.checked)return t[o.name]="empty"}else{if(!o.value.replace(/\s+/g,"").length)return t[o.name]="empty";if(i=o.getAttribute("pattern"),i&&new RegExp(i,"gi").test(o.value)===!1)return t[o.name]="format"}}),t},_checkForm:function(){var e,o,i,a,r,n,s,u;s=this.oForm.data("nodes"),r=this.oForm.data("validate-elements").filter(":visible"),n=!r.length,u="bUIButton__mColor_"+(s.oSubmitButton.data("color")||"green"),r.each(function(){var e;return e=t(this),n=!(!e.data("valid")&&!e[0].disabled)});for(a in s.oValidateElementsInGroups)for(i=s.oValidateElementsInGroups[a],i.valid=!1,o=0;o<i.length;)e=i[o],e.data("valid")&&!e[0].disabled&&(i.valid=!0),o++;if(n)for(a in s.oValidateElementsInGroups)if(!s.oValidateElementsInGroups[a].valid){n=!1;break}return!n||this.oForm.hasClass("mSubmitBlockWithOpacity")||s.oSubmitButton.prop("disabled")?s.oSubmitButton.addClass("bUIButton__mState_disabled").removeClass(u):s.oSubmitButton.removeClass("bUIButton__mState_disabled").addClass(u),this.oForm.data("isValid",n)},remove:function(){return this.oForm=null}}})}).call(this);
//# sourceMappingURL=bForm_simple.js.map
