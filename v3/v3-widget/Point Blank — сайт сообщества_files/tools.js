define(["exports","packages/es6-promise"],function(exports,t){"use strict";function n(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return{emit:function(t,n){var e={bubbles:!0,cancelable:!0},r=void 0;try{r=new CustomEvent(t,{detail:n})}catch(o){r=document.createEvent("CustomEvent"),r.initCustomEvent(t,e.bubbles,e.cancelable,n)}return document.dispatchEvent(r),this},on:function(e,r){return n.stopPropagation&&t.addEventListener(e,function(t){t.stopPropagation()},!1),t.addEventListener(e,r,!1),this},off:function(n,e){return t.removeEventListener(n,e,!1),this}}}function e(t,n){return Array.prototype.map.call(t,n)}function r(t,n){return Array.prototype.forEach.call(t,n)}function o(){var t=arguments.length<=0||void 0===arguments[0]?"FSM":arguments[0];return function(n){var e,r,o=this.transition,i=this.handle;this.transition=function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r.length>1&&r[1]?r[1]:r[0],u=t+' :: =====>> :: "'+a+'" state';e!==u&&(l(u),e=u),o.apply(this,r)},this.handle=function(n){if("string"!=typeof n)return this;var e=t+' :: <<===== :: "'+n+'" event in state "'+this.state+'"';r!==e&&(l(e),r=e);for(var o=arguments.length,a=Array(o>1?o-1:0),u=1;u<o;u++)a[u-1]=arguments[u];return i.apply(this,[n].concat(a))}}}function i(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function a(t,n){for(var e,r,o=i(t),a=1;a<arguments.length;a++){e=arguments[a],r=Object.keys(Object(e));for(var u=0;u<r.length;u++)try{o[r[u]]=e[r[u]]}catch(c){}}return o}function u(t,n){if(!t||!n||!n.length)return null;var e=t.getAttribute("data-product-id"),r=n.filter(function(t){return t.productId===e});return r.length?r[0]:null}function c(t){return new f(function(n,e){t.then(n,e)})}function s(){}function l(){if(/debug-fsm=true/.test(window.location.search)){for(var t=arguments.length,n=Array(t),e=0;e<t;e++)n[e]=arguments[e];console.log.apply(console,n)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.EventBus=n,exports.map=e,exports.each=r,exports.initializeFSM=o,exports.assign=a,exports.getProductInfo=u,exports.promisifyJq=c,exports.noop=s,exports.logFSM=l;var f=window.Promise||t.Promise});
//# sourceMappingURL=tools.js.map
