define(["exports","module","packages/bacon","packages/4game-api-client","packages/event-bus"],function(exports,e,t,r,u){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(){return o["default"].fromPromise(f["default"].wallets.get()).map(".wallets").flatMap(o["default"].fromArray)}var o=n(t),f=n(r),c=n(u),l=document.documentElement.getAttribute("data-area").toLowerCase(),i={},d={ru:"RUB",eu:"EUR"},s=new o["default"].Bus,p=o["default"].fromBinder(function(e){return c["default"].on("@userbar","updateBalance",e),function(){return c["default"].off("@userbar","updateBalance",e)}}).flatMap(a());s.plug(p),s.plug(a());var g=s.filter(function(e){var t=i[e.currencyCode]||{};return!_.isEqual(t,e)});g.onValue(function(e){i[e.currencyCode]=e}),e.exports={stream:g,plug:function(e){return s.plug(e)},get:function(e){return g.filter(function(t){return t.currencyCode===e}).toProperty(i[e])},getAreaCurrency:function(){return this.get(d[l])}}});
//# sourceMappingURL=wallets.js.map
