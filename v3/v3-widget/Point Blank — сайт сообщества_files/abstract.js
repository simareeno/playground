define(["exports","module","packages/bacon","packages/web-components"],function(exports,e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=a(t),i=a(n),c=function(){function e(t,n){var a=arguments.length<=2||void 0===arguments[2]?i["default"].components:arguments[2];o(this,e),this._stream=t,this._handlers=n,this._components=a}return r(e,[{key:"init",value:function(){var e=this,t=this._components,n=function(t){"false"!=t.getAttribute("data-bind")&&e.bind(t)};t.on("attached",n).on("detached",this.unbind.bind(this)),t.getAttachedNames().forEach(function(e){t.getAttached(e).map(n)})}},{key:"bind",value:function(e){this.initDataStream(e)}},{key:"unbind",value:function(e){this.destroyDataStream(e)}},{key:"initDataStream",value:function(e){null==e.__dataStream&&(e.__dataStream=new u["default"].Bus)}},{key:"destroyDataStream",value:function(e){e.__dataStream&&(e.__dataStream.end(),delete e.__dataStream)}},{key:"getComponentStream",value:function(e){return this._stream.get(e)}},{key:"bindDataToModel",value:function(e,t){var n=e.nodeName.toLowerCase(),a=this.getComponentStream(n).filter(Boolean);return a=a.debounce(300),e.__dataStream.plug(a),Object.keys(t).forEach(function(n){var o=t[n];a.map(n).filter(function(e){return null!=e}).onValue(function(t){e.modelNode.get(o).textContent=t})}),a}}],[{key:"objectToModel",value:function(t,n){Object.keys(n).forEach(function(a){var o=document.createElement(e.toKebabCase(a)),r=n[a];null!=r&&("object"==typeof r?Array.isArray(r)?e.arrayToModel(o,r):e.objectToModel(o,r):o.textContent=r),t.appendChild(o)})}},{key:"arrayToModel",value:function(e,t){t.forEach(function(t){var n=document.createElement("item");null!=t&&("object"==typeof t?(n.setAttribute("name",t.name),n.setAttribute("value",t.value)):n.setAttribute("name",t)),e.appendChild(n)})}},{key:"toKebabCase",value:function(e){return e.replace(/^[_\s]+|[_\s]+$/g,"").split("").reduce(function(e,t){var n=e?"-":"";return/[A-Z]+/.test(t)?e+n+t.toLowerCase():/[_\s]/.test(t)?e+n:e+t},"")}}]),e}();e.exports=c});
//# sourceMappingURL=abstract.js.map
