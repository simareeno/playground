(function(){define(["packages/che","packages/jquery"],function(t,e){var i,n,o,r,s,u;return o=t.events,i=null,n=null,s=null,u=null,r=!1,{domEvents:{"click #jsOverlayLayer":"startHide"},moduleEvents:{"section-popup:inserted":"startShow","section-popup:removed":"startHide","hide-popup":"startHide","hide-popup-by-click":"hideByClick","soft-popup-open":"softStart","soft-popup-close":"startHide"},hideTimeout:0,init:function(){return i=e(this.element),n=e(this.element).find(".bOverlay__eContent"),this.checkIsShowed()&&this.onShow(),this.isEmpty()},softStart:function(t){return null!=(null!=t?t.skin:void 0)&&this.setSkin(t.skin),this.show()},startShow:function(t){return this.hideTimeout&&clearTimeout(this.hideTimeout),this.show(t)},show:function(t){return null!=n.find(".bUIPopup").length&&this.setSkin(n.find(".bUIPopup").data("skin")),o.trigger("overlay-visible:start"),i.fadeIn("fast",e.proxy(this.onShow,this))},setSkin:function(t){return u=t,i.data("skin",u).addClass("bOverlay__mColor_"+u)},startHide:function(t){return this.sectionToHide=t,this.hideTimeout=setTimeout(function(e){return function(){return e.hide(t)}}(this),100)},hide:function(){if(r)return o.trigger("overlay-hidden:start"),i.fadeOut("fast",e.proxy(this.onHide,this)),e(document).off(".popup-overlay")},onShow:function(){return r=!0,setTimeout(function(){return o.trigger("overlay-visible")},10),e(document).on("keydown.popup-overlay",e.proxy(this.keyHandler,this))},onHide:function(){return r=!1,u=i.data("skin"),i.removeClass("bOverlay__mColor_"+u).removeData("skin"),o.trigger("overlay-hidden")},hideByClick:function(){var t;if(r)return t=n.find(".bUIPopup a.jsEscKey"),t.length?t[0].click():this.startHide()},keyHandler:function(t){var e;if(e=27,"keydown"===t.type&&t.keyCode===e)return this.hideByClick()},checkIsShowed:function(){return r=i.is(":visible")},isEmpty:function(){return 0===n.children().length}}})}).call(this);
//# sourceMappingURL=bOverlay.js.map
