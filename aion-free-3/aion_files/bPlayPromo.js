(function(){define(["packages/jquery"],function(t){var n;return n=".bPlayPromo",{init:function(n){return this.context=t(n),window.rotator_json=function(t){return function(n){return t.showBanners(t.createHtml(n))}}(this),t.getJSON(this.context.data("source")+"?callback=?"),this.jsonTimeout=setTimeout(function(t){return function(){return t.hideContainer()}}(this),1e4)},turnOff:function(){return clearTimeout(this.jsonTimeout)},showBanners:function(t){return this.context.addClass("bPlayPromo__mState_loaded"),this.context.find(".bPlayPromo__eContent").append(t)},createHtml:function(t){var n,e,i,o,a,r,l,s,u;for(clearTimeout(this.jsonTimeout),t.banners.length||this.hideContainer(),i=0,e="",r=Math.round((t.banners.length-1)/2),s=t.banners,o=a=0,l=s.length;a<l;o=++a)n=s[o],u="_"!==n.title?n.title:null,e+=jade.templates.bPlayPromo__eArticle({data:{caption:n.image.text||n.description,image:n.image.url,link:n.image.linkUrl,tag:u,theme:n.template,invisible:o>=3,big:!o}}),0===o?(e+='<div class="bPlayPromo__eColumn bPlayPromo__eColumn__mType_first">',i++):i<2&&o+1>r&&(e+='</div><div class="bPlayPromo__eColumn">',i++);return e+="</div>"},hideContainer:function(){return this.context.parents(".bPlayLayout__eInfo").addClass("bPlayLayout__eInfo__mState_hidden")}}})}).call(this);
//# sourceMappingURL=bPlayPromo.js.map
