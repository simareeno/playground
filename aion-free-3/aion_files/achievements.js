define(["exports","module","packages/bacon","packages/4game-api-client"],function(exports,e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function u(e){return function(t){return t.achievementType===e}}var a=n(t),i=n(r),o={},f={},c=new a["default"].Bus,m=i["default"].achievements.get(),p=a["default"].fromPromise(m).map(".achievements");c.plug(p.flatMap(a["default"].fromArray));var s=c.filter(function(e){var t=e.timestamp,r=e.achievementType,n=f[r]||0,u=t>n;return f[r]=t,u&&(o[e.achievementType]=e),u});e.exports={stream:s,plug:function(e){return c.plug(e)},get:function(e){var t=u(e);return a["default"].fromPromise(m).map(function(e){return e.achievements.filter(t)[0]||!1}).mapError(function(e){return!1}).merge(s.filter(t)).toProperty(null).skipDuplicates()},getStatus:function(){return a["default"].fromPromise(m).map(function(e){return e.achievements.length?200:404}).mapError(function(e){return e.status}).toProperty()}}});
//# sourceMappingURL=achievements.js.map
