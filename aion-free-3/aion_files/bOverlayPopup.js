(function(){define(["packages/che","packages/jquery","packages/underscore","block!bScrollbarsTest"],function(t,e,n,r){var o,i,u,l,a,s,c,d,p,h,f,b,m,_,g,w;return b=null,l=null,f=null,h=null,d=null,p=null,u=null,o=null,i=null,a=function(t){if(d=e(window).width()<e("#UserBar4Game").width(),p=i.width(),c(),i.addClass("bGlobalLayout__mWithPopup_true"),u.hasClass("bUIPopup__mAnimation_Prepare")||t)return setTimeout(function(){try{return t||u.addClass("bUIPopup__mAnimation_Start"),c(),window.getComputedStyle()}catch(e){}},100)},w=function(){var t,n,r;return l=u.find(".bUIPopup__eWin"),f=l.outerWidth(),h=l.outerHeight(),r=l.offset(),t=r.left+f>e(window).width()?"add":"remove",m(t,"horizontal"),n=r.top+h>e(window).height()?"add":"remove",m(n,"vertical")},m=function(t,e){return t+="Class",e="bGlobalLayout__mPopupScroll_"+e,i[t](e)},c=function(){if(r.isBodyWithBars())return e(".bFooter, .bPageLayout__eContent").css("padding-right",r.getWidth()),e(".bUnsupportedMessage__eInnerWrapper").css("padding-right","+="+r.getWidth()),e(".bGamePanelFixed").css("right","+="+r.getWidth())},s=function(){if(e(".jsUIPopup:visible","#OverlayContent").length)return a(!0),setTimeout(function(){return w()},500)},g=function(){return e(window).on("resize.scrollVisibleCheck",function(){return clearTimeout(b),b=setTimeout(function(){return w()},150)})},_=function(){return e(window).off("resize.scrollVisibleCheck")},{domEvents:{"click @element":"tryToHide"},moduleEvents:{"overlay-visible":{handler:"show",recall:"true"},"update-scrollbars":"updateScrollbars"},init:function(t){return u=e(t),o=u.parent(),i=e(".bGlobalLayout"),i.length||(i=e(document.body)),b=null,f=0,h=0,s()},show:function(){return a(),this.updateScrollbars()},updateScrollbars:function(){return w()},tryToHide:function(e){if(e.target===this.element)return t.events.trigger("hide-popup-by-click"),i.removeClass("bGlobalLayout__mWithPopup_true")},turnOn:function(){return g()},turnOff:function(){return _(),i.removeClass("bGlobalLayout__mWithPopup_true")}}})}).call(this);
//# sourceMappingURL=bOverlayPopup.js.map
