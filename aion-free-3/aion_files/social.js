(function(){define(["require","packages/jquery","packages/event-bus","packages/4game-api-client","./social/vkontakte","./social/facebook","./social/twitter","./social/odnoklassniki","./social/signal"],function(require,e,n,t,o,a,i,r){var l,c,u,s,f,d,k,h;return s={4:"facebook",5:"vkontakte",6:"twitter",14:"odnoklassniki",15:"yandex"},h={odnoklassniki:r,vkontakte:o,facebook:a,twitter:i},c={yandex:"ya",facebook:"fb",vkontakte:"vk",odnoklassniki:"ok"},u={width:{"default":640},height:{yandex:600,vkontakte:430,"default":358}},f=function(n){var t,o;return t=e.Deferred(),o=h[s[n]||n],o?t.resolve(o):t.reject(),t},k=function(e){var n;for(n in s)if(s[n]===e)return n},l=function(n,t,o){var a,i;return i=null,a="hash"===o?"#":"?",n.indexOf(a)!==-1&&e.each(n.substr(n.indexOf(a)+1).split("&"),function(e,n){if(n=n.split("="),n[0]===t&&void 0!==n[1]&&n[1])return n[1]=decodeURIComponent(n[1]),i=n[1]}),i},d=function(e,n){var t;if(t=u[e])return null!=t[n]?t[n]:t["default"]},{auth:function(n,t,o){var a;return a=function(){var n,t,o;return n=e("#jsGameKey").val()||!1,(n=!!n&&("/"===n?n:"/"+n+"/"))?n:(o=window.location.href,t=l(o,"redirectTo","get"),t?t:window.location.pathname)},this.externalAuth(n,a(),t,o)},externalAuth:function(e,o,a,i){var r,l,u,s,f,k,h,v,p;return s=Date.now(),p=d("width",e),u=d("height",e),f=(screen.width-p)/2,h=(screen.height-u)/2,r=c[e],k="?redirectTo="+encodeURIComponent(o),a&&(k+="&rememberMe=1"),i&&(k+="&localEventId="+s),k+="&type="+r,v=t.getOAuthUrl(r)+encodeURIComponent(k),v+="&display=popup","function"==typeof i&&(l=function(e){return n.off("@social-auth","callback-"+s,l),i(e)},n.on("@social-auth","callback-"+s,l)),window.open(v,null,"resizable=yes,scrollbars=yes,status=yes,width="+p+",height="+u+",left="+f+",top="+h)},shareInWall:function(e,n){return f(k(e)).then(function(e){return e.shareInWall(n)})}}})}).call(this);
//# sourceMappingURL=social.js.map
