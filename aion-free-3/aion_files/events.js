define(["exports","module","packages/bacon"],function(exports,e,n){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var i=Array.prototype.slice,u=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),l=t(n),o=function(){function e(n,t,r){a(this,e),this.name=t,this.channel=n,this.payload=r}return u(e,[{key:"evaluate",value:function(e){return e.apply(void 0,[this.name].concat(r(this.payload)))}}]),e}(),c=/^@/,f=[],s=new l["default"].Bus,h=s.filter(function(e){var n=e.channel,t=e.name,r=e.payload;return n&&t&&r});h.assign(f,"push"),e.exports={stream:h,filter:{envelope:function(e,n){return function(t){return n||(n=t.name),t.channel==e&&t.name==n}}},plug:function(e){return s.plug(e)},getAll:function(){return l["default"].fromArray(f).merge(this.stream)},republishAll:function(){return l["default"].sequentially(0,f).merge(this.stream)},log:function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];if("@"===e[0])var n=i.call(arguments),t=n[0],r=n[1],a=n.slice(2);else var t="global",u=i.call(arguments),r=u[0],a=u.slice(1);s.push(new o(t.replace(c,""),r,a))},track:function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];return this.log.apply(this,["@user","interaction"].concat(n))},trackDOMEvents:function(){var e=arguments.length<=0||void 0===arguments[0]?document.body:arguments[0];return l["default"].fromEvent(e,"click").map(function(e){return e.target.getAttribute("data-tracking")}).filter(Boolean).assign(this,"track")}}});
//# sourceMappingURL=events.js.map
